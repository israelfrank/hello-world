@Library("shared-library") _
pipeline {
   agent any
      stages {
         stage('stage 1') {
            steps {
              helloworld()
            }
          }
          stage('stage 2') {
            steps{
                configFileProvider([configFile(fileId:'c16b3bcf-f157-4d5a-8398-e238157d41ee',variable:'CONFIG_FILE')]){
                 sh 'cat ${CONFIG_FILE}' 
            }    
             script{
                sh 'zip -r hello.zip *'    
                 sh 'ls && pwd'
                 archiveArtifacts artifacts: 'hello.zip', onlyIfSuccessful: true
                // s3Upload(bucket:"jenknis-artifact", workingDir:'github-hello_world', includePathPattern:'hello.zip');
                    withAWS(region:'EU (Frankfurt) eu-central-1', credentials:'awscredentialsID'){
                   s3Upload(bucket:'jenknis-artifact', workingDir:'', includePathPattern:'hello.zip'); // pick your jar or whatever you need
 

                }   
             }
      }
    }
}
